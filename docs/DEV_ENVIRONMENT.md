# ğŸ› ï¸ Hardhatå¼€å‘ç¯å¢ƒç®¡ç†æŒ‡å—

## ğŸ“‹ æ ¸å¿ƒè¦ç‚¹

### 1. **æ¯æ¬¡é‡å¯èŠ‚ç‚¹éƒ½éœ€è¦é‡æ–°éƒ¨ç½²åˆçº¦**

**åŸå› **: Hardhatæœ¬åœ°èŠ‚ç‚¹æ˜¯å†…å­˜åŒºå—é“¾ï¼Œé‡å¯åæ‰€æœ‰æ•°æ®éƒ½ä¼šä¸¢å¤±ã€‚

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥å½“å‰çŠ¶æ€
npm run dev:status

# ä¸€é”®å®Œæ•´è®¾ç½®ï¼ˆæ¨èï¼‰
npm run dev:setup

# æˆ–æ‰‹åŠ¨æ‰§è¡Œ
npm run dev:node    # å¯åŠ¨èŠ‚ç‚¹
npm run dev:deploy  # éƒ¨ç½²åˆçº¦
npm run dev:test    # æµ‹è¯•è¿æ¥
```

### 2. **ä¿æŒå‰ç«¯åœ°å€é…ç½®ä¸éƒ¨ç½²è®°å½•åŒæ­¥**

**é‡è¦æ€§**: å‰ç«¯éœ€è¦çŸ¥é“æœ€æ–°çš„åˆçº¦åœ°å€æ‰èƒ½æ­£ç¡®äº¤äº’ã€‚

**è‡ªåŠ¨åŒæ­¥æµç¨‹**:
- éƒ¨ç½²è„šæœ¬ä¼šè‡ªåŠ¨æ›´æ–° `frontend/src/config/contracts.ts`
- ä½¿ç”¨ `npm run dev:deploy` ä¼šåŒæ—¶éƒ¨ç½²å’Œæ›´æ–°é…ç½®

**æ‰‹åŠ¨éªŒè¯**:
```bash
# æ£€æŸ¥çŠ¶æ€
npm run dev:status

# çœ‹åˆ°ä»¥ä¸‹è¾“å‡ºè¯´æ˜åŒæ­¥æ­£å¸¸ï¼š
# Contract Deployed: ğŸŸ¢ Yes
# Frontend Config: ğŸŸ¢ Synced
```

### 3. **å®šæœŸæ¸…ç†æ„å»ºç¼“å­˜é¿å…ç¼–è¯‘é—®é¢˜**

**æ¸…ç†æ—¶æœº**:
- åˆçº¦ç¼–è¯‘å¤±è´¥æ—¶
- ç±»å‹å®šä¹‰ä¸ä¸€è‡´æ—¶
- é‡åˆ°å¥‡æ€ªçš„é”™è¯¯æ—¶
- åˆ‡æ¢åˆ†æ”¯å

**æ¸…ç†å‘½ä»¤**:
```bash
# æ¸…ç†æ‰€æœ‰ç¼“å­˜
npm run dev:clean

# æˆ–æ‰‹åŠ¨æ¸…ç†
npx hardhat clean          # æ¸…ç†Hardhatç¼“å­˜
rm -rf node_modules/.cache # æ¸…ç†Nodeç¼“å­˜
cd frontend && npm run clean # æ¸…ç†å‰ç«¯ç¼“å­˜
```

### 4. **éªŒè¯åˆçº¦åœ°å€åæ‰è¿›è¡Œå‰ç«¯é›†æˆ**

**éªŒè¯æµç¨‹**:
```bash
# 1. éƒ¨ç½²åˆçº¦
npm run dev:deploy

# 2. éªŒè¯éƒ¨ç½²
npm run dev:verify

# 3. æµ‹è¯•è¿æ¥
npm run dev:test

# 4. æ£€æŸ¥å‰ç«¯æ„å»º
cd frontend && npm run build
```

## ğŸš€ è‡ªåŠ¨åŒ–è„šæœ¬ä½¿ç”¨æŒ‡å—

### å¿«é€Ÿå¼€å§‹
```bash
# å®Œæ•´å¼€å‘ç¯å¢ƒè®¾ç½®ï¼ˆæ¨èï¼‰
npm run dev:setup

# æ£€æŸ¥å½“å‰çŠ¶æ€
npm run dev:status

# åªéƒ¨ç½²åˆçº¦
npm run dev:deploy

# åªæ¸…ç†ç¼“å­˜
npm run dev:clean
```

### è„šæœ¬åŠŸèƒ½è¯´æ˜

| è„šæœ¬ | åŠŸèƒ½ | ç”¨é€” |
|------|------|------|
| `dev:setup` | å®Œæ•´ç¯å¢ƒè®¾ç½® | é¦–æ¬¡è¿è¡Œæˆ–é‡å¯ç”µè„‘å |
| `dev:status` | æ£€æŸ¥ç¯å¢ƒçŠ¶æ€ | éšæ—¶æŸ¥çœ‹åŒæ­¥çŠ¶æ€ |
| `dev:node` | å¯åŠ¨HardhatèŠ‚ç‚¹ | å•ç‹¬å¯åŠ¨åŒºå—é“¾ç½‘ç»œ |
| `dev:deploy` | éƒ¨ç½²åˆçº¦ | åˆçº¦å¼€å‘å®Œæˆå |
| `dev:verify` | éªŒè¯éƒ¨ç½² | ç¡®è®¤åˆçº¦åœ°å€æ­£ç¡® |
| `dev:test` | æµ‹è¯•è¿æ¥ | ç¡®è®¤å‰ç«¯èƒ½è¿æ¥åˆçº¦ |
| `dev:clean` | æ¸…ç†ç¼“å­˜ | é‡åˆ°ç¼–è¯‘é—®é¢˜æ—¶ |

### çŠ¶æ€æ£€æŸ¥è¾“å‡ºç¤ºä¾‹

```
[2024-01-01T12:00:00.000Z] ğŸ” Checking development environment status...
[2024-01-01T12:00:00.000Z] Hardhat Node: ğŸŸ¢ Running
[2024-01-01T12:00:00.000Z] Contract Deployed: ğŸŸ¢ Yes
[2024-01-01T12:00:00.000Z] Contract Address: 0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512
[2024-01-01T12:00:00.000Z] Frontend Config: ğŸŸ¢ Synced
```

### æ•…éšœæ’é™¤

#### ğŸ”´ èŠ‚ç‚¹æœªè¿è¡Œ
```bash
npm run dev:node
```

#### ğŸ”´ åˆçº¦æœªéƒ¨ç½²
```bash
npm run dev:deploy
```

#### ğŸ”´ å‰ç«¯é…ç½®ä¸åŒæ­¥
```bash
npm run dev:deploy  # ä¼šè‡ªåŠ¨æ›´æ–°é…ç½®
```

#### ğŸ”´ ç¼–è¯‘å¤±è´¥
```bash
npm run dev:clean
npm run dev:setup
```

## ğŸ“ æ–‡ä»¶ç»“æ„

```
health-lock/
â”œâ”€â”€ contracts/
â”‚   â”œâ”€â”€ FitnessDataStorageSimple.sol    # ç®€åŒ–çš„åˆçº¦
â”‚   â””â”€â”€ FitnessDataStorage.sol          # FHEç‰ˆæœ¬ï¼ˆå¤‡ç”¨ï¼‰
â”œâ”€â”€ frontend/
â”‚   â””â”€â”€ src/config/contracts.ts         # å‰ç«¯åˆçº¦é…ç½®
â”œâ”€â”€ deployments/
â”‚   â””â”€â”€ localhost/
â”‚       â””â”€â”€ FitnessDataStorageSimple.json  # éƒ¨ç½²è®°å½•
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ dev-setup.js                    # å¼€å‘ç¯å¢ƒç®¡ç†è„šæœ¬
â”‚   â””â”€â”€ test-contract-connection.js     # è¿æ¥æµ‹è¯•è„šæœ¬
â””â”€â”€ package.json                        # NPMè„šæœ¬é…ç½®
```

## ğŸ”„ å·¥ä½œæµç¨‹

### æ–°å¼€å‘ä¼šè¯
1. **æ£€æŸ¥çŠ¶æ€**: `npm run dev:status`
2. **æ¸…ç†ç¼“å­˜**: `npm run dev:clean` (å¦‚æœéœ€è¦)
3. **å®Œæ•´è®¾ç½®**: `npm run dev:setup`
4. **å¼€å§‹å¼€å‘**: å‰ç«¯å’Œåˆçº¦éƒ½å·²å‡†å¤‡å°±ç»ª

### åˆçº¦ä¿®æ”¹å
1. **ç¼–è¯‘åˆçº¦**: `npm run compile`
2. **é‡æ–°éƒ¨ç½²**: `npm run dev:deploy`
3. **éªŒè¯**: `npm run dev:verify`
4. **æµ‹è¯•**: `npm run dev:test`

### å‰ç«¯ä¿®æ”¹å
1. **æ„å»º**: `cd frontend && npm run build`
2. **æµ‹è¯•**: `npm run dev:test`

## âš¡ é«˜çº§ç”¨æ³•

### è‡ªå®šä¹‰éƒ¨ç½²
```javascript
// åœ¨ dev-setup.js ä¸­ä¿®æ”¹ fullSetup å‚æ•°
await manager.fullSetup({
  skipNode: true,    // è·³è¿‡èŠ‚ç‚¹å¯åŠ¨
  skipDeploy: false, // æ‰§è¡Œéƒ¨ç½²
  skipVerify: false  // æ‰§è¡ŒéªŒè¯
});
```

### æ‰¹é‡æ“ä½œ
```bash
# æ¸…ç†å¹¶é‡æ–°è®¾ç½®
npm run dev:clean && npm run dev:setup

# éƒ¨ç½²å¹¶æµ‹è¯•
npm run dev:deploy && npm run dev:test
```

## ğŸ“ æœ€ä½³å®è·µ

1. **æ€»æ˜¯ä»çŠ¶æ€æ£€æŸ¥å¼€å§‹**: `npm run dev:status`
2. **é‡åˆ°é—®é¢˜å…ˆæ¸…ç†**: `npm run dev:clean`
3. **ä½¿ç”¨å®Œæ•´è®¾ç½®**: `npm run dev:setup` è€Œä¸æ˜¯æ‰‹åŠ¨æ­¥éª¤
4. **å®šæœŸéªŒè¯åŒæ­¥**: ç¡®ä¿å‰ç«¯é…ç½®ä¸åˆçº¦åœ°å€åŒæ­¥
5. **é‡å¯ç”µè„‘å**: è¿è¡Œ `npm run dev:setup`

## ğŸ†˜ å¸¸è§é—®é¢˜

**Q: åˆçº¦éƒ¨ç½²æˆåŠŸä½†å‰ç«¯æ— æ³•è¿æ¥ï¼Ÿ**
A: æ£€æŸ¥ `npm run dev:status` ç¡®è®¤é…ç½®åŒæ­¥

**Q: ç¼–è¯‘å¤±è´¥ä¸”æ— æ³•è§£å†³ï¼Ÿ**
A: `npm run dev:clean` ç„¶åé‡æ–°è®¾ç½®

**Q: èŠ‚ç‚¹å¯åŠ¨å¤±è´¥ï¼Ÿ**
A: ç¡®ä¿ç«¯å£8545æœªè¢«å ç”¨ï¼Œæ£€æŸ¥é˜²ç«å¢™è®¾ç½®

**Q: ç±»å‹é”™è¯¯æˆ–ABIé—®é¢˜ï¼Ÿ**
A: è¿è¡Œ `npm run typechain` é‡æ–°ç”Ÿæˆç±»å‹å®šä¹‰